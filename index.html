<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ARC Dev Hub | shumai1979</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; text-align: center; padding: 50px; background: #0f172a; color: white; }
        .card { background: #1e293b; padding: 40px; border-radius: 20px; box-shadow: 0 10px 25px rgba(0,0,0,0.5); display: inline-block; max-width: 450px; border: 1px solid #334155; }
        h1 { color: #38bdf8; font-size: 24px; margin-bottom: 10px; }
        .score-badge { background: #059669; color: white; padding: 8px 16px; border-radius: 50px; font-weight: bold; display: inline-block; margin-bottom: 20px; font-size: 14px; }
        button { margin-top: 20px; padding: 16px 32px; font-size: 16px; cursor: pointer; border-radius: 12px; border: none; background: #3b82f6; color: white; font-weight: bold; width: 100%; transition: 0.2s; }
        button:hover { background: #2563eb; transform: scale(1.02); }
        #status { margin-top: 25px; font-weight: bold; font-size: 13px; color: #94a3b8; min-height: 20px; }
    </style>
</head>
<body>

    <div class="card">
        <h1>ARC Interaction Hub</h1>
        <div class="score-badge">Gitcoin Passport: 31.9</div>
        <p>Developer: <strong>0x51D182a04a9F22FDf424Dc854cc6c7bE70259024</strong></p>
        <p>Network: <strong>Arc Testnet (ID: 5042002)</strong></p>
        
        <button id="connectBtn">Conectar Carteira</button>
        <div id="status">Status: Aguardando interação...</div>
    </div>

    <script>
        const connectBtn = document.getElementById('connectBtn');
        const statusDiv = document.getElementById('status');

        async function connect() {
            try {
                // Tenta detetar o provedor de forma a evitar conflitos com múltiplas carteiras
                let provider = window.ethereum;
                
                // Se houver múltiplas carteiras, tenta encontrar a que está ativa
                if (window.ethereum && window.ethereum.providers) {
                    provider = window.ethereum.providers.find(p => p.isRabby) || window.ethereum.providers[0];
                }

                if (!provider) {
                    statusDiv.innerText = "Nenhuma carteira detetada. Instale a Rabby.";
                    statusDiv.style.color = "#f87171";
                    return;
                }

                statusDiv.innerText = "A chamar a carteira...";
                statusDiv.style.color = "#fbbf24";

                // Solicita as contas de forma direta
                const accounts = await provider.request({ 
                    method: 'eth_requestAccounts' 
                });
                
                if (accounts.length > 0) {
                    const account = accounts[0];
                    statusDiv.innerText = "Conectado: " + account.substring(0,6) + "..." + account.substring(38);
                    statusDiv.style.color = "#10b981";
                    connectBtn.innerText = "Carteira Ativa";
                }
            } catch (err) {
                console.error("Erro na conexão:", err);
                statusDiv.innerText = "Erro: " + (err.message || "Conexão rejeitada");
                statusDiv.style.color = "#f87171";
            }
        }

        connectBtn.addEventListener('click', connect);
    </script>

</body>
</html>
